{"version":3,"sources":["../../src/index.js","components/input-one.js","components/input-two.js","App.js","index.js"],"names":["useLinkedState","gateway","useState","notFirstRun","useRef","useEffect","thisMember","setState","member","state","InputOne","type","placeholder","value","onChange","e","target","InputTwo","App","initialState","members","useStateGateway","ReactDOM","render","document","getElementById"],"mappings":"yMAYO,SAASA,EAAeC,GAAS,QACZC,mBAAQ,OAACD,QAAD,IAACA,OAAD,EAACA,EAAnC,cADsC,mBAChC,EADgC,KAChC,EADgC,KAEhCE,EAAcC,mBA8BpB,OA5BAC,oBAAU,KACR,MAAMC,EAAa,SAASC,YAE5B,OADAN,kBACO,KACLA,iBAAuBA,kBAAvBA,QAJJI,IAQAA,oBAAU,KACR,IAAI,OAAAJ,QAAO,IAAPA,OAAA,EAAAA,EAAA,cAAJ,EAAmC,qBACdA,EAAnB,SADiC,IACjC,2BAAoC,KAApC,EAAoC,QAC9BO,gBAAgCL,EAApC,SACEK,eAH6B,+BAOnCP,eACKE,EAAL,UAEIF,oBACAA,wBAFF,GAIEM,EAASN,aAATM,OAEFJ,eAED,CAlBHE,IAoBO,CAACI,EAAR,GCzCa,SAASC,GAAS,QAAET,IAAY,MAAD,EAClBD,EAAeC,GADG,mBACrCQ,EADqC,KAC9BF,EAD8B,KAK5C,OACE,6BACE,2BACEI,KAAK,OACLC,YAAY,YACZC,MAAOJ,EACPK,SATN,SAAsBC,GACpBR,EAASQ,EAAEC,OAAOH,WCHP,SAASI,GAAS,QAAEhB,IAAY,MAAD,EAClBD,EAAeC,GADG,mBACrCQ,EADqC,KAC9BF,EAD8B,KAK5C,OACE,6BACE,2BACEI,KAAK,OACLC,YAAY,YACZC,MAAOJ,EACPK,SATN,SAAsBC,GACpBR,EAASQ,EAAEC,OAAOH,WCWPK,MAXH,KACV,MAAMjB,EHLD,SAAyBkB,GAC9B,MAAMlB,EAAUG,iBAAO,CAAEgB,QAAF,GAAeD,iBAMtC,OALAd,oBAAU,IACD,KACLJ,UAAkB,CAAEmB,QAAF,GAAeD,iBAFrCd,IAKOJ,EAAP,QGFgBoB,CAAgB,IAChC,OACE,6BACE,0EACA,kBAACX,EAAD,CAAUT,QAASA,IACnB,kBAACgB,EAAD,CAAUhB,QAASA,MCNzBqB,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,U","file":"static/js/main.719325d5.chunk.js","sourcesContent":["import { useEffect, useState, useRef } from 'react'\n\nexport function useStateGateway(initialState) {\n  const gateway = useRef({ members: [], initialState })\n  useEffect(() => {\n    return () => {\n      gateway.current = { members: [], initialState }\n    }\n  }, [])\n  return gateway.current\n}\n\nexport function useLinkedState(gateway) {\n  const [state, setState] = useState(gateway?.initialState)\n  const notFirstRun = useRef()\n\n  useEffect(() => {\n    const thisMember = { state, setState }\n    gateway.members.push(thisMember)\n    return () => {\n      gateway.members.splice(gateway.members.indexOf(thisMember), 1)\n    }\n  }, [])\n\n  useEffect(() => {\n    if (gateway?.lastUpdate !== state) {\n      for (let member of gateway.members) {\n        if (member.setState !== setState && notFirstRun.current) {\n          member.setState(state)\n        }\n      }\n    }\n    gateway.lastUpdate = state\n    if (!notFirstRun.current) {\n      if (\n        gateway.members.length > 0 &&\n        gateway.members[0].setState !== setState\n      ) {\n        setState(gateway.members[0].state)\n      }\n      notFirstRun.current = true\n    }\n  }, [state])\n\n  return [state, setState]\n}\n","import React from 'react'\nimport { useLinkedState } from 'use-linked-state'\n\nexport default function InputOne({ gateway }) {\n  const [state, setState] = useLinkedState(gateway)\n  function handleChange(e) {\n    setState(e.target.value)\n  }\n  return (\n    <div>\n      <input\n        type='text'\n        placeholder='Type here'\n        value={state}\n        onChange={handleChange}\n      />\n    </div>\n  )\n}\n","import React from 'react'\nimport { useLinkedState } from 'use-linked-state'\n\nexport default function InputTwo({ gateway }) {\n  const [state, setState] = useLinkedState(gateway)\n  function handleChange(e) {\n    setState(e.target.value)\n  }\n  return (\n    <div>\n      <input\n        type='text'\n        placeholder='Type here'\n        value={state}\n        onChange={handleChange}\n      />\n    </div>\n  )\n}\n","import React from 'react'\n\nimport { useStateGateway } from 'use-linked-state'\nimport InputOne from './components/input-one'\nimport InputTwo from './components/input-two'\n\nconst App = () => {\n  const gateway = useStateGateway('')\n  return (\n    <div>\n      <h3>States of Input fields are linked together</h3>\n      <InputOne gateway={gateway} />\n      <InputTwo gateway={gateway} />\n    </div>\n  )\n}\n\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}